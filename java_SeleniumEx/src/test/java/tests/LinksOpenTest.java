package tests;

/*   Task 14   */

import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import org.openqa.selenium.WebElement;
import steps.CountriesPageSteps;
import steps.EditCountryPageSteps;

@DisplayName("External Links")
public class LinksOpenTest extends BaseTest {
    protected CountriesPageSteps countriesPageSteps;
    protected EditCountryPageSteps editCountryPageSteps;

    @Test
    @DisplayName("External link opening")
    public void openLinkInNewTabTest() {
        countriesPageSteps = new CountriesPageSteps(driver);
        editCountryPageSteps = new EditCountryPageSteps(driver);

        countriesPageSteps.open()
                .openCountryByIndex(1);

        for (WebElement link : editCountryPageSteps.getExternalLinks()) {
            editCountryPageSteps
                    .OpenLink(link);
            editCountryPageSteps
                    .VerifyThatNewTabOpened();
            editCountryPageSteps
                    .closeTab();
        }
    }
}
